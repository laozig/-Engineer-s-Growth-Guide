# PHP 语言基础

掌握PHP的语言基础是进行Web开发的关键。本章将介绍PHP脚本的基本语法，包括如何嵌入代码、添加注释以及向浏览器输出内容。

## PHP标记 (Tags)

PHP代码需要被放置在特定的开始和结束标记之间，以便PHP解析器能够识别并执行它。

### 1. 标准标记 (Canonical PHP Tags)

这是最常用也是官方推荐的标记风格。
```php
<?php
// PHP代码写在这里
echo '你好, 世界!';
?>
```
几乎所有的PHP代码都应该使用这种标记。

### 2. 短开放标记 (Short-open Tags)

如果启用了`short_open_tag`配置，或者PHP版本高于5.4，你可以使用更短的标记。
```php
<?
// 需要启用 short_open_tag
echo '这是短标记风格。';
?>
```
**注意**: 为了最大程度的兼容性，尤其是在分发代码时，**强烈建议始终使用 `<?php ?>` 标准标记**。

### 3. 短Echo标记 (Short Echo Tags)

这是一种用于快速输出变量或表达式值的便捷写法。它始终可用（自PHP 5.4起），且不受`short_open_tag`配置的影响。
```php
<p>我的名字是 <?= $name; ?>。</p>
```
这等同于：
```php
<p>我的名字是 <?php echo $name; ?>。</p>
```
这种标记在模板文件中非常有用。

## 从HTML中分离PHP

PHP脚本可以与HTML混合在一起。PHP解析器只会执行`<?php ?>`标记内的代码。

**示例:**
```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>PHP与HTML混合示例</title>
</head>
<body>
    <h1>欢迎!</h1>
    <p>这是一个普通的HTML段落。</p>
    <?php
        // 这是PHP代码块
        echo '<p>这是一个由PHP生成的段落。</p>';
    ?>
    <p>现在是
    <?php
        // 在HTML中嵌入PHP表达式
        echo date('Y-m-d H:i:s');
    ?>
    </p>
</body>
</html>
```
当服务器处理此文件时，PHP代码会被执行，其输出（这里是`echo`的内容）会替换原来的PHP代码块，然后将最终的HTML发送到浏览器。

## 指令分隔符 (Semicolon)

与C或Java类似，PHP要求在每个语句的末尾使用分号（`;`）。分号用于分隔不同的指令。
```php
<?php
$greeting = '你好'; // 这是一个语句
echo $greeting;      // 这是另一个语句
// PHP代码块的结束标记 ?> 也隐含了一个分号，所以最后一句可以省略
?>
```
省略结束标记前的最后一个分号是合法的，但为了代码风格的统一和避免错误，建议始终为每个语句添加分号。
```php
<?php
echo "你好";
echo "世界"; // 如果不加分号，这里会产生一个解析错误
?>
```

## 注释 (Comments)

注释是代码中不会被执行的部分，用于解释代码的功能或意图。PHP支持多种注释风格。

### 1. 单行注释

使用 `//` 或 `#` 来进行单行注释。
```php
<?php
// 这是一个单行注释
echo 'Hello World!'; // 这也是一个单行注释

# 这也是一种单行注释（不常用）
?>
```

### 2. 多行注释

使用 `/* ... */` 来进行跨越多行的注释。
```php
<?php
/*
  这是一个多行注释块。
  它可以用来详细描述一个函数
  或者一个复杂逻辑的功能。
*/
$a = 10; // 这里是代码
echo $a;
?>
```
多行注释不能嵌套。

## 输出内容：`echo` 和 `print`

`echo` 和 `print` 是PHP中用于向输出缓冲区（通常是浏览器）发送数据的两种主要方式。

### `echo`

-   `echo` 是一个语言结构 (language construct)，而不是一个函数。
-   它可以一次输出一个或多个字符串。
-   它没有返回值。
-   它通常比 `print` 稍快一些（尽管在实际应用中这种差异可以忽略不计）。

**示例:**
```php
<?php
$name = "PHP";
$version = 8;

// 输出单个字符串
echo "欢迎来到PHP的世界!";

// 输出多个字符串，用逗号分隔
echo "<br>", "当前学习的语言是 ", $name, " ", $version;

// 可以使用括号，但不必要
echo ("<br>括号是可选的。");
?>
```

### `print`

-   `print` 也是一个语言结构。
-   它一次只能输出一个字符串。
-   它总会返回 `1`。

**示例:**
```php
<?php
$lang = "PHP";

print "学习 $lang 很有趣。";

// 因为有返回值，它可以用于表达式中
if (print("<br>输出成功!")) {
    // 这段代码会执行，因为print返回1，在布尔上下文中为true
}
?>
```

### `echo` vs `print`

| 特性 | `echo` | `print` |
| :--- | :--- | :--- |
| **参数** | 可接受多个参数 | 只接受一个参数 |
| **返回值** | 无 | 总是返回 `1` |
| **速度** | 稍快 | 稍慢 |

在绝大多数情况下，开发者倾向于使用 `echo`，因为它更灵活（多参数）且理论上性能更好。除非你需要利用`print`的返回值，否则`echo`是首选。 