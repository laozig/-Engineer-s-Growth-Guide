# C 语言：运算符

运算符是用于对变量和值执行操作的特殊符号。C 语言拥有丰富的运算符集，大致可以分为以下几类：

1.  **算术运算符**
2.  **关系运算符**
3.  **逻辑运算符**
4.  **位运算符**
5.  **赋值运算符**
6.  **其他运算符**

理解运算符的**优先级**和**结合性**对于正确编写表达式至关重要。

## 1. 算术运算符 (Arithmetic Operators)

用于执行基本的数学运算。

| 运算符 | 描述 | 示例 (设 `a=10, b=3`) | 结果 |
| :--- | :--- | :--- | :--- |
| `+` | 加法 | `a + b` | `13` |
| `-` | 减法 | `a - b` | `7` |
| `*` | 乘法 | `a * b` | `30` |
| `/` | 除法 | `a / b` | `3` |
| `%` | 取模 (取余数) | `a % b` | `1` |
| `++` | 自增 | `a++` 或 `++a` | `11` |
| `--` | 自减 | `a--` 或 `--a` | `9` |

**注意**：
- 两个整数相除，结果将是整数，小数部分会被截断。例如 `10 / 3` 结果是 `3`。若要得到浮点数结果，至少要有一个操作数是浮点数，例如 `10.0 / 3`。
- `++` 和 `--` 有前置和后置的区别：
  - **前置 (`++a`)**: 先将 `a` 的值加 1，然后返回新值。
  - **后置 (`a++`)**: 先返回 `a` 的当前值，然后再将 `a` 的值加 1。

## 2. 关系运算符 (Relational Operators)

用于比较两个值，其结果是一个布尔值（在 C 中，`1` 代表 `true`，`0` 代表 `false`）。

| 运算符 | 描述 | 示例 (设 `a=10, b=3`) | 结果 |
| :--- | :--- | :--- | :--- |
| `==` | 等于 | `a == b` | `0` |
| `!=` | 不等于 | `a != b` | `1` |
| `>` | 大于 | `a > b` | `1` |
| `<` | 小于 | `a < b` | `0` |
| `>=` | 大于等于 | `a >= b` | `1` |
| `<=` | 小于等于 | `a <= b` | `0` |

## 3. 逻辑运算符 (Logical Operators)

用于组合或反转布尔表达式。

| 运算符 | 描述 | 示例 (设 `a=1, b=0`) | 结果 |
| :--- | :--- | :--- | :--- |
| `&&` | 逻辑与 (AND) | `a && b` | `0` |
| `||` | 逻辑或 (OR) | `a || b` | `1` |
| `!` | 逻辑非 (NOT) | `!a` | `0` |

**短路求值 (Short-circuit Evaluation)**:
- 对于 `&&`，如果左侧表达式为 `false` (0)，则右侧表达式不会被求值。
- 对于 `||`，如果左侧表达式为 `true` (非0)，则右侧表达式不会被求值。

## 4. 位运算符 (Bitwise Operators)

直接对整数的二进制位进行操作。常用于底层编程、设备驱动和性能优化。

| 运算符 | 描述 |
| :--- | :--- |
| `&` | 按位与 |
| `|` | 按位或 |
| `^` | 按位异或 |
| `~` | 按位取反 (一元) |
| `<<`| 左移 |
| `>>`| 右移 |

```c
unsigned char a = 0b00110011; // 51
unsigned char b = 0b01010101; // 85

unsigned char res_and = a & b; // 0b00010001 (17)
unsigned char res_or  = a | b; // 0b01110111 (119)
unsigned char res_xor = a ^ b; // 0b01100110 (102)
unsigned char res_not = ~a;    // 0b11001100 (204)
unsigned char res_lsh = a << 2;// 0b11001100 (204)
unsigned char res_rsh = a >> 2;// 0b00001100 (12)
```

## 5. 赋值运算符 (Assignment Operators)

用于给变量赋值。

| 运算符 | 等价于 | 示例 (`a=10`) |
| :--- | :--- | :--- |
| `=` | | `a = 20;` |
| `+=` | `a = a + b` | `a += 5;` (a=15) |
| `-=` | `a = a - b` | `a -= 5;` (a=5) |
| `*=` | `a = a * b` | `a *= 2;` (a=20) |
| `/=` | `a = a / b` | `a /= 2;` (a=5) |
| `%=` | `a = a % b` | `a %= 3;` (a=1) |
| `&=` | `a = a & b` | |
| `|=` | `a = a | b` | |
| `^=` | `a = a ^ b` | |
| `<<=`| `a = a << b`| |
| `>>=`| `a = a >> b`| |


## 6. 其他运算符

### `sizeof` 运算符
返回一个变量或数据类型的大小（以字节为单位）。
```c
int x;
size_t size = sizeof(x); // size 为 4 (在典型系统上)
```

### 三元运算符 (Ternary Operator) `? :`
这是一个条件运算符，可以看作是 `if-else` 语句的简化版。
语法：`condition ? expression_if_true : expression_if_false;`

```c
int a = 10, b = 20;
int max = (a > b) ? a : b; // max 的值为 20
```

## 运算符优先级

C 语言中运算符的优先级决定了哪个运算符先被求值。下表从高到低简要列出了一些常用运算符的优先级。

| 优先级 | 运算符 | 结合性 |
| :--- | :--- | :--- |
| **最高** | `()` `[]` `.` `->` `++` `--` | 从左到右 |
| | `!` `~` `*` (指针) `&` (地址) `sizeof` | 从右到左 |
| | `*` `/` `%` | 从左到右 |
| | `+` `-` | 从左到右 |
| | `<<` `>>` | 从左到右 |
| | `<` `<=` `>` `>=` | 从左到右 |
| | `==` `!=` | 从左到右 |
| | `&` (按位与) | 从左到右 |
| | `^` (按位异或) | 从左到右 |
| | `|` (按位或) | 从左到右 |
| | `&&` (逻辑与) | 从左到右 |
| | `||` (逻辑或) | 从左到右 |
| | `?:` (三元) | 从右到左 |
| | `=` `+=` `-=` `*=` `/=` 等 | 从右到左 |
| **最低** | `,` (逗号) | 从左到右 |

**最佳实践**：当你不确定优先级时，**使用圆括号 `()` 来明确指定求值顺序**。这能让你的代码更清晰，并避免难以发现的错误。

---

了解了运算符之后，我们就可以构建更复杂的逻辑了。下一步是学习 [C 语言控制流程](c-control-flow.md)。 