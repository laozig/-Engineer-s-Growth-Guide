# C 语言：数组与字符串

到目前为止，我们处理的都是单个变量。但如果需要处理大量同类型的数据，比如 100 个学生的成绩，为每个学生声明一个变量显然不现实。这时，我们就需要使用**数组**。

## 1. 数组 (Arrays)

数组是一个由**相同类型**的元素组成的、具有固定大小的**连续内存**序列。

### 声明与初始化数组

**声明语法:**
`数据类型 数组名[大小];`

- `数据类型`：数组中所有元素的类型。
- `数组名`：数组的标识符。
- `大小`：数组可以容纳的元素数量，必须是一个正整数常量。

```c
// 声明一个可以存储 10 个整数的数组
int scores[10]; 

// 声明一个可以存储 5 个浮点数的数组
float prices[5];
```

**初始化语法:**
可以在声明时使用花括号 `{}` 初始化数组。

```c
// 完整初始化
int numbers[5] = {10, 20, 30, 40, 50};

// 部分初始化，未指定的元素会被自动初始化为 0
int partial[10] = {1, 2, 3}; // 后 7 个元素为 0

// 如果提供了初始化列表，可以省略数组大小
// 编译器会自动计算大小
int auto_size[] = {9, 8, 7, 6}; // 大小为 4
```

### 访问数组元素

通过**索引 (index)** 来访问数组中的特定元素。C 语言的数组索引**从 0 开始**。对于一个大小为 `n` 的数组，其有效索引范围是 `0` 到 `n-1`。

**语法:**
`数组名[索引]`

```c
int numbers[5] = {10, 20, 30, 40, 50};

// 读取元素
int first_element = numbers[0]; // 结果是 10
int third_element = numbers[2]; // 结果是 30

// 修改元素
numbers[4] = 99; // 将最后一个元素修改为 99

// 打印所有元素
for (int i = 0; i < 5; i++) {
    printf("Element at index %d is %d\n", i, numbers[i]);
}
```

**警告**：C 语言不会检查数组索引是否越界。访问 `numbers[5]` 或 `numbers[-1]` 会导致**未定义行为**，这是 C 编程中一个非常常见的、危险的错误来源。

## 2. C 风格字符串

在 C 语言中，字符串并不是一个内置的数据类型。相反，它是一种约定俗成的表示法：一个以**空字符 `\0` (null character)** 结尾的**字符数组**。

`\0` 是一个特殊的字符，其 ASCII 值为 0，用于标记字符串的结束。

### 声明与初始化字符串

```c
// 方法一：作为字符数组
// 需要手动添加 '\0'，或者保证数组足够大
char greeting[6] = {'H', 'e', 'l', 'l', 'o', '\0'};

// 方法二：使用字符串字面量 (推荐)
// 编译器会自动在末尾添加 '\0'
char farewell[] = "Goodbye"; // 数组大小为 8 (7个字符 + '\0')

// 打印字符串
printf("%s\n", greeting);
printf("%s\n", farewell);
```
`printf` 函数的 `%s` 格式说明符会从给定的地址开始打印字符，直到遇到 `\0` 为止。

标准库 `<string.h>` 提供了一系列用于操作字符串的函数，例如：
- `strcpy()`: 复制字符串
- `strcat()`: 连接字符串
- `strlen()`: 计算字符串长度 (不包括 `\0`)
- `strcmp()`: 比较两个字符串

## 3. 将数组传递给函数

当将一个数组作为参数传递给函数时，实际上传递的并**不是整个数组的副本**。相反，传递的是数组**第一个元素的内存地址**。这意味着，函数接收到的是一个指向数组的**指针**。

这个重要的特性导致：
1.  **高效性**: 无论数组多大，函数调用都非常快，因为只需要传递一个地址。
2.  **副作用**: 函数内部对数组元素的修改会**直接影响**原始数组。

**函数原型语法:**
```c
void myFunction(int arr[], int size);
// 或者等价地
void myFunction(int* arr, int size);
```
因为函数只接收到地址，它并不知道数组有多大。因此，**必须将数组的大小作为一个单独的参数传递给函数**。

**示例：计算数组元素之和**
```c
#include <stdio.h>

// 函数接收一个数组和它的大小
int sum_array(int arr[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        // 在函数内部访问数组元素
        sum += arr[i];
    }
    return sum;
}

int main() {
    int my_numbers[] = {1, 2, 3, 4, 5};
    int size = sizeof(my_numbers) / sizeof(my_numbers[0]);
    
    int total = sum_array(my_numbers, size);
    
    printf("Sum of array elements: %d\n", total);
    return 0;
}
```

## 4. 多维数组

C 语言支持多维数组，最常见的是二维数组，可以将其想象成一个表格或矩阵。

**声明与初始化二维数组:**
`数据类型 数组名[行数][列数];`

```c
// 一个 3 行 4 列的二维数组
int matrix[3][4] = {
    {1, 2, 3, 4},   // 第 0 行
    {5, 6, 7, 8},   // 第 1 行
    {9, 10, 11, 12} // 第 2 行
};

// 访问元素 matrix[行索引][列索引]
int element = matrix[1][2]; // 结果是 7
```

---

数组和字符串是构建更复杂数据结构的基础。然而，要真正释放 C 语言的威力，我们必须理解它最核心的概念：[指针](c-pointers.md)。
