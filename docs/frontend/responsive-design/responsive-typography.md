# 优雅的响应式排版

排版（Typography）是 Web 设计的灵魂。在响应式设计中，我们的目标是确保文本在任何设备上都清晰易读、美观舒适。这不仅仅是改变字体大小，更涉及到行高、行长、以及垂直韵律的整体协调。

## 1. 使用相对单位作为基础

为了让排版体系能够灵活缩放，我们应该避免在 ont-size 中使用固定的 px 单位。

### a. em：响应式排版的基石

em (root em) 单位是相对于根元素 <html> 的 ont-size 进行计算的。这是它最大的优势：我们可以通过在媒体查询中改变根元素的字体大小，来实现整个页面所有使用 em 单位的元素（包括字体、内边距、外边距等）进行等比例的、可预测的缩放。

**实践方法：**

1.  **设置根字体大小**: 在 <html> 元素上设置一个基准字体大小。通常设置为 100%，这在大多数浏览器中等于 16px。

    `css
    html {
      font-size: 100%; /* 1rem = 16px */
    }
    `

2.  **在媒体查询中调整根字体大小**: 在更大的屏幕上，我们可以稍微增加根字体大小，提升阅读舒适度。

    `css
    @media (min-width: 800px) {
      html {
        font-size: 112.5%; /* 1rem = 18px */
      }
    }
    `

3.  **使用 em 定义所有排版尺寸**: 在整个项目中，使用 em 来定义 ont-size, line-height, margin, padding 等。

    `css
    body {
      font-family: sans-serif;
      line-height: 1.5; /* 使用无单位的行高，它会基于当前元素的font-size计算 */
      font-size: 1rem; /* 在移动端是16px，在桌面端是18px */
    }
    h1 {
      font-size: 2.5rem; /* 移动端: 40px, 桌面端: 45px */
      line-height: 1.2;
      margin-bottom: 1.5rem;
    }
    `

### b. em：用于局部缩放

em 单位是相对于其 **父元素** 的 ont-size（如果用在 ont-size 属性上）或 **自身元素** 的 ont-size（如果用在其他属性上）。

em 非常适合那些希望其尺寸能与其上下文字体大小相关联的场景。例如，一个按钮的内边距，或者一段文字中图标的大小。

`css
.button {
  font-size: 0.8rem;
  padding: 0.5em 1em; /* 内边距会随按钮字体大小的变化而变化 */
}
.icon-in-text {
  width: 1.2em; /* 图标的宽度是其所在文本字体大小的1.2倍 */
  height: 1.2em;
}
`

## 2. 流畅排版 (Fluid Typography)

在断点之间突然改变字体大小有时会显得生硬。流畅排版技术可以让字体大小在两个断点之间进行平滑的、线性的缩放，提供更无缝的体验。

### a. w 单位的问题
一个简单的想法是直接使用视口宽度单位 w：
`css
h1 {
  font-size: 5vw;
}
`
但这有两个严重问题：
1.  在非常宽的屏幕上，字体会变得巨大无比。
2.  在非常窄的屏幕上，字体会变得小到无法阅读，损害可访问性。

### b. calc() 的改进
我们可以结合 em 和 w 来稍微改善这个问题，为字体大小设置一个固定的基础值和一个随视口变化的动态值。
`css
h1 {
  font-size: calc(1.5rem + 3vw);
}
`
但这仍然没有解决字体在极端屏幕尺寸下会变得过大或过小的问题。

### c. clamp(): 终极解决方案

CSS 的 clamp() 函数完美地解决了这个问题。它接受三个参数：一个最小值、一个首选值（动态值）和一个最大值。
ont-size: clamp(MIN, VAL, MAX);

- MIN: 字体允许的最小尺寸。
- VAL: 基于视口的首选尺寸。
- MAX: 字体允许的最大尺寸。

浏览器会尽量使用 VAL 的值，但绝不会让结果小于 MIN 或大于 MAX。

**示例:**
`css
h1 {
  /*
    - 最小字体为 2rem。
    - 最大字体为 4rem。
    - 在两者之间，字体大小会根据 1rem + 5vw 的公式平滑变化。
  */
  font-size: clamp(2rem, 1rem + 5vw, 4rem);
}
`
这提供了一种健壮、可控且优雅的方式来实现流畅排版，而无需复杂的媒体查询。

## 3. 保持理想的行长 (Measure)

为了获得最佳的阅读体验，文本的每行长度（Measure）不应过长或过短。普遍接受的理想行长是每行 **45 到 75 个字符**。

- **行太长**: 读者的眼睛很难从一行的末尾找到下一行的开头。
- **行太短**: 读者的眼睛需要频繁地换行，打断阅读节奏。

我们可以使用 ch 单位来控制行长。1ch 大约等于当前字体中数字0的宽度，可以粗略地用作平均字符宽度的度量。

`css
p {
  max-width: 65ch; /* 限制段落的最大宽度，以保持舒适的阅读行长 */
}
`
将这段代码应用到你的文章主体或博客内容上，可以极大地提升文本的可读性。

## 4. 垂直韵律 (Vertical Rhythm)

垂直韵律是指页面元素在垂直方向上的间距遵循一个一致的、可预测的模式。这能创造出一种和谐、有序的视觉感受。

实现垂直韵律的关键是使用一个统一的基准 line-height，并将所有的垂直 margin 和 padding 都设置为这个基准的倍数。

`css
/* 设定一个基准行高 */
:root {
  --base-line-height: 1.5rem; /* 假设是 24px */
}

body {
  line-height: var(--base-line-height);
}

h1, h2, p, ul {
  /* 确保所有块级元素的下外边距都是基准行高的倍数 */
  margin-bottom: var(--base-line-height);
}

.special-box {
  padding-top: calc(var(--base-line-height) * 2); /* 顶部内边距是基准的两倍 */
}
`
通过这种方式，无论字体大小如何变化，页面在垂直方向上的网格感都能保持一致。

---
**下一章**: **[超越视口：内在Web设计](intrinsic-design.md)**
