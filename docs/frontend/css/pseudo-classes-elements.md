# 伪类与伪元素

伪类 (Pseudo-classes) 和伪元素 (Pseudo-elements) 是 CSS 选择器的重要组成部分，它们允许我们根据一些不是由文档树结构直接反映的信息来应用样式，例如用户的交互状态或内容的特定部分。

## 1. 伪类 (Pseudo-classes)

伪类以 **单冒号 (:)** 开头，用于向选择器添加关键字，以描述元素的 **特殊状态**。

### 常见的伪类

#### 用户行为伪类
这些伪类与用户的交互行为相关。
- **:hover**: 当鼠标指针悬停在元素上时应用样式。
- **:active**: 当用户激活元素时应用样式（例如，点击鼠标不松开时）。
- **:focus**: 当元素获得焦点时应用样式（例如，通过 Tab 键或鼠标点击选中的输入框）。
- **:focus-within**: 当元素本身或其任何后代元素获得焦点时，该元素应用样式。这对于高亮整个表单组非常有用。
- **:focus-visible**: 当元素通过键盘等非指针方式获得焦点时应用样式，旨在提供更智能的焦点指示，避免鼠标点击时也出现焦点轮廓。

#### 链接伪类
- **:link**: 应用于尚未被访问过的链接。
- **:visited**: 应用于已被用户访问过的链接。
> **隐私注意**：为保护用户隐私，现代浏览器严格限制了可以应用于 :visited 状态的样式，通常只允许修改 color, ackground-color, order-color 等颜色相关的属性。

#### 逻辑伪类
这些伪类可以改变其他选择器的行为。
- **:not(selector)**: 排除匹配 selector 的元素。
- **:is(selector1, selector2, ...)**: 匹配选择器列表中的任何一个。它的特异性由其参数中特异性最高的选择器决定。
- **:where(selector1, selector2, ...)**: 与 :is() 功能相同，但其特异性 **始终为零**。这使得它在编写可轻松覆盖的基础样式时非常有用。

#### 结构化和位置伪类
这些伪类根据元素在文档树中的位置或关系来选中它们。
- **:root**: 匹配文档的根元素，在 HTML 中就是 <html> 元素。常用于声明全局 CSS 变量。
- **:empty**: 匹配没有任何子元素（包括文本节点）的元素。
- **:first-child**, **:last-child**: 匹配其父元素下的第一个或最后一个子元素。
- **:only-child**: 匹配没有其他兄弟元素的元素。
- **:nth-child(an+b)**: 匹配其父元素下的特定位置的子元素。
  - :nth-child(2): 第二个子元素。
  - :nth-child(odd) 或 :nth-child(2n+1): 奇数位置的子元素。
  - :nth-child(even) 或 :nth-child(2n): 偶数位置的子元素。
  - :nth-child(n+3): 从第三个开始的所有子元素。
  - :nth-child(-n+3): 前三个子元素。
- **:nth-last-child(an+b)**: 与 :nth-child 类似，但从后往前计数。
- **:first-of-type**, **:last-of-type**, **:only-of-type**, **:nth-of-type(an+b)**: 与 *-child 系列功能类似，但它们只在 **相同类型** 的兄弟元素中进行匹配和计数。

## 2. 伪元素 (Pseudo-elements)

伪元素以 **双冒号 (::)** 开头（为了与伪类区分，尽管浏览器为了兼容性也接受单冒号），用于为元素的 **特定部分** 添加样式，或者在元素内容的前后插入生成的内容。

### 常见的伪元素

- **::before**, **::after**:
  这两个是最强大的伪元素。它们在选中元素内容的 **前面 (::before)** 或 **后面 (::after)** 创建一个可样式化的子元素。
  - **必须** 与 content 属性一起使用，即使 content 的值是空字符串 ''。
  - 它们在文档流中是内联的（display: inline），但可以像普通元素一样修改其 display 类型。
  - 用途：清除浮动（clearfix hack）、添加装饰性图标、创建自定义工具提示等。

  `css
  .tooltip {
    position: relative;
  }
  .tooltip::after {
    content: attr(data-tooltip-text); /* 从元素的 data-* 属性获取内容 */
    position: absolute;
    /* ...其他样式... */
  }
  `

- **::first-line**: 选中块级元素的第一行文本。
- **::first-letter**: 选中块级元素的第一个字母。常用于创建首字下沉效果。
- **::marker**: 选中列表项 (<li>) 的标记（项目符号或数字）。
- **::selection**: 选中用户用鼠标高亮选择的部分文本。
- **::placeholder**: 选中表单元素（如 <input> 或 <textarea>）的占位文本。

## 总结

- **伪类 (:)** 像是给元素添加了一个看不见的类，用于描述其 **状态** 或 **在文档树中的关系**。它选中了整个元素。
- **伪元素 (::)** 像是创建了一个文档树中不存在的元素，用于为元素的 **特定部分** 添加样式。它只选中了元素的一部分或生成了新的内容。

---
**下一章**: **[CSS命名规范：BEM](bem-methodology.md)**
